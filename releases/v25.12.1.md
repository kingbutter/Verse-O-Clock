### v25.12.1 — Let There Be Light

This release focuses on stability, offline operation, and a significantly improved OTA experience, making Verse-O-Clock more reliable as a true “set it and forget it” e-paper device.

Offline usage is now a first-class feature, and OTA updates are safer, clearer, and easier to manage.

---

## Highlights

Offline Mode (New)
- New Offline Mode toggle in the setup portal
- Manual date and time entry via browser (datetime-local)
- Clock runs locally using manual time with drift correction
- Bible verses load entirely from LittleFS
- Weather and OTA automatically disabled while offline

Ideal for wall clocks, churches, cabins, workshops, and air-gapped installations.

---

OTA Updates (Redesigned)
- OTA no longer relies on a manifest file
- Device queries GitHub Releases (latest)
- Firmware asset must be named:
  <DEVICE_ID>_firmware.bin  
  Example: xiao_esp32c3_7p5_firmware.bin
- Firmware is downloaded and flashed directly

New OTA UI flow:
- “Check for update” performs a safe version check with no reboot
- “Apply update” performs the firmware update explicitly
- Automatic update check runs when the setup page loads
- OTA status is displayed as a pill for visual consistency:
  - OTA: checking
  - OTA: v25.12.1 available
  - OTA: up to date
  - OTA: error

---

Setup Portal Improvements
- Streaming HTML output to reduce RAM usage and eliminate flicker
- Light, Dark, and Auto theme support
- Timezone search with browser-based detection
- Latitude and longitude via IP lookup
- 12-hour / 24-hour clock toggle
- Glance Mode for large time display and shorter verses
- Offline Mode and manual time controls integrated cleanly
- OTA status and controls embedded directly into the portal

---

Technical Notes
- Bible verses are stored locally in LittleFS
- No network access is required to display verses
- Time source priority:
  1. Manual time when Offline Mode is enabled
  2. NTP synchronization when online
- OTA uses HTTPS with redirect support
- TLS verification is disabled for reliability using WiFiClientSecure.setInsecure()
- Version comparison is string-based (FW_VERSION vs latest tag)
- Development builds labeled “dev” will always report an available update

---

Fixes and Stability
- Fixed OTA failures caused by missing or mismatched manifest files
- Resolved screen redraw flicker during setup mode
- Hardened chunked web UI output to prevent memory fragmentation
- Improved timezone application order when setting manual time

---

Supported Hardware
- Seeed XIAO ESP32-C3
- 7.5 inch e-Paper display (GDEY075T7 or equivalent)
- LittleFS partition for verse storage

---

Verse-O-Clock  
A quiet reminder, right on time.